<!--
  ~ NOTICE
  ~ This software was produced for the U.S. Government and is subject to the
  ~ Rights in Data-General Clause 5.227-14 (May 2014).
  ~ Copyright 2018 The MITRE Corporation. All rights reserved.
  ~ Approved for Public Release; Distribution Unlimited. Case 18-2165
  ~
  ~ This project contains content developed by The MITRE Corporation.
  ~ If this code is used in a deployment or embedded within another project,
  ~ it is requested that you send an email to opensource@mitre.org
  ~ in order to let us know where this software is being used.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">My Information</h2>
    </div>
    <div class="panel-body">
        <form class="form-horizontal" name="userForm" ng-submit="submitDefaultOrgChange()" novalidate>
            <!-- Full Name -->
            <div class="row form-group">
                <label class="col-sm-3 text-right">Name</label>
                <div class="col-sm-6">{{ user.fullName }}</div>
            </div>
            <!-- Username -->
            <div class="row form-group">
                <label class="col-sm-3 text-right">Username</label>
                <div class="col-sm-6">{{ user.username }}</div>
            </div>
            <!-- Email Address -->
            <div class="row form-group">
                <label class="col-sm-3 text-right">Email</label>
                <div class="col-sm-6">{{ user.email }}</div>
            </div>
            <!-- Default Organization -->
            <div class="row form-group">
                <label class="col-sm-3 text-right">Default Glossary</label>
                <div class="col-sm-6">
                    <div uib-dropdown class="btn-group select-tag">
                        <div class="btn btn-primary dropdown-selector" uib-dropdown-toggle>
                            <i class="fa fa-sitemap" ng-if="selectedDefaultOrg.name"></i>
                            {{selectedDefaultOrg.name || "No Default Glossary"}} <span class="caret" style=""></span>
                        </div>
                        <ul class="dropdown-menu dropdown-menu-left" uib-dropdown-menu role="menu">
                            <li role="menuitem">
                                <a ng-click="updateSelectedDefaultOrg(false)" href="">No Default Glossary</a>
                            </li>
                            <li role="menuitem" ng-repeat="org in user.organizations">
                                <a ng-click="updateSelectedDefaultOrg(org)" href="">{{::org.name}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Submit Button -->
            <div class="form-group">
                <div class="row">
                    <div class="col-xs-offset-5 col-xs-3">
                        <button type="submit" class="btn btn-warning btn-block">Update User</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="panel panel-primary">
    <div class="panel-heading">
        <h2 class="panel-title">Change Password</h2>
    </div>
    <div class="panel-body">
        <form class="form-horizontal" name="passwordForm" ng-submit="submit()" novalidate>
            <!-- Current Password -->
            <div class="form-group">
                <label class="col-sm-3 control-label">Current Password</label>
                <div class="col-sm-6">
                    <input type="password" class="form-control" name="old" required ng-model="password.old">
                </div>
            </div>
            <!-- New Password 1 -->
            <div class="form-group">
                <label class="col-sm-3 control-label">New Password</label>
                <div class="col-sm-6">
                    <input type="password" class="form-control" name="new" required ng-model="password.new">
                </div>
            </div>
            <!-- New Password 2 -->
            <div class="form-group">
                <label class="col-sm-3 control-label">Re-type New Password</label>
                <div class="col-sm-6">
                    <input type="password" class="form-control" name="newRetype" required ng-model="password.newRetype">
                </div>
            </div>
            <!-- Submit Button -->
            <div class="form-group">
                <div class="row">
                    <div class="col-sm-offset-5 col-sm-2">
                        <button type="submit" class="btn btn-warning btn-block" ng-disabled="passwordForm.$invalid || passwordForm.$pristine || password.new != password.newRetype">Change Password</button>
                    </div>
                </div>
                <div class="row" >
                    <div class="col-sm-12 text-center">
                        <p class="help-block">
                            <span ng-show="passwordForm.$invalid">All fields are required</span>
                            <span ng-show="password.new != password.newRetype">New Password fields must match</span>
                            <span ng-show="attempted && succeeded">Password successfully changed</span>
                            <span ng-show="attempted && !succeeded">Incorrect Password. Contact an administrator if you have forgotten your password.</span>
                        </p>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
